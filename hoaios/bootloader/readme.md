
# org 0x7c00 ; 

    org 是Origin的英文缩写,意思为起始地址或源地址。这条伪指令用于指定程序的
起始地址,若程序未使用 org 伪指令,那么编译器会把地址 0x0000 作为程序的起始地址。程序的起始
地址将主要影响绝对地址寻址指令,不同的起始地址会编译生成不同的绝对地址。因此,代码 org
0x7c00 的意思是,将程序的起始地址设置在 0x7c00 处。至于为什么是 0x7c00 ,想必只有当年的BIOS
工程师们才会知道。既然BIOS会加载引导程序至内存地址 0x7c00 处,我们就必须将引导程序的起始
地址设置在此处,否则当程序访问绝对地址时很可能会出错。

# BaseOfStack equ 0x7c00
    equ 伪指令的作用是,让其左边的标识符代表右边的表达式。 equ 等价语
句不会给标识符分配存储空间,而且标识符不能与其他符号同名,也不能被重新定义。 equ 不光可以
代表常量和表达式,也可以代表字符串以及一些助记符。代码中的标识符 BaseOfStack 用于为栈指针
寄存器SP提供栈基址。其实BIOS并未要求栈基址必须设置在 0x7c00 地址处,而且Boot引导程序极少
涉及栈操作,因此读者不必担心栈溢出问题。

# int 10h
    BIOS中断服务程序INT 10h
    实现屏幕信息显示相关操作。INT 10h中断服务程序要求在调用时,必须向AH寄存器传入服务程序的
    主功能编号,再向其他寄存器传入参数


# 具体的BIOS中断的使用，可以看读书笔记，其中会记录的比较详细



# StartBootMessage: db "Start Boot"

可以理解为C语言中的一维字符数组,而标识符 StartBootMessage 可以看作数组名


# times 510 - ( $ - $$ ) db 0

        因为软盘是个块设备,访问块设备的特点是每次必须以扇区为单位(512 B)
    ,而times伪指令恰好可以实现多次重复操作,所以这行汇编代码的目的是,
    通过 times 伪指令填充引导扇区剩余空间,以保证生成的文件大小为512 B。

  ## $ - $$
        将当前行被编译后的地址(机器码地址)减去本节(Section)程序的起始地址。由于Boot引导
    程序只有一个以 0x7c00 为起始地址的节,那么表达式 $ - $$ 的作用是计算出当前程序生成的机器码
    长度,进而可知引导扇区必须填充的数据长度( 510 - ($ - $$) )。

# dw 0xaa55

        最后,再将一个字( 0xaa55 )填充到程序的末尾。此处请注意,在3.1.1节中已经提到引导扇区
    是以 0x55 和 0xaa 两个字节作为结尾,由于Intel处理器是以小端模式存储数据,那么用一个字表示 0x55
    和 0xaa 就应该是 0xaa55 ,这样它在扇区里的存储顺序才是 0x55 、 0xaa。



# 下面记录一些，操作

    1. 制作虚拟软盘：　bximage #根据提示去创建　
       - fd 1.44M name.img 
       - 最后一行提示信息 floppya: image="boot.img", status=inserted ,告诉用户如何把镜像文件加入到虚拟平台环境配置信息里,其中 status 是虚   拟软盘镜像的状态, inserted 的意思是已将虚拟软盘插入到虚拟软盘驱动器中。
  
    2. 编译汇编：　nasm 汇编源码　-o 目标程序名 : nasm boot.asm -o boot.bin
        - 编译结束后，要将二进制程序文件写入到虚拟软盘镜像文件呢，而不是cp到 name.img中
        - 由于引导程序被强行写入到虚拟软盘的第一个扇区中,这个引导扇区写入过程并不属于文件系统管理范畴。如果使用“复制”一词将会牵涉文件系统的操作,感觉　描述不恰当,而用“写入”一词相对更合理些。

    3. dd命令的使用: dd if=boot.bin of=../../bochs-2.6.8/boot.img bs=512 count=1 conv=notrunc
        - if=输入的源文件
        - of=写入的镜像文件 name.img
        - bs=512 指定传输的块大小为512B
        - count=1 指定写入目标文件name.img的块数量
        - conv=notrunc 规定在写入数据后不截断(改变)输出文件的尺寸大小

    4. 启动虚拟机：　bochs -f ./bochsrc
        - 在运行虚拟机之前,请确保虚拟软盘镜像文件boot.img、虚拟平台环境配置文件bochsrc 以及其他文件的路径一定要正确,否则虚拟机将无法正常运行。


# 汇编调试
	魔术调试
		xchg bx, bx
